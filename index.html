<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>GPA-CALCULATOR</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Quicksand:wght@300..700&display=swap"
      rel="stylesheet"
    />
    <style>
      body {
        font-family: "Quicksand", sans-serif;
        background: #f8f9fa;
      }
      form {
        background: linear-gradient(270deg, #65bc6b, #009688);
        border-radius: 10px;
      }
      #input {
        border-radius: 50px;
        margin-bottom: 5px;
        padding: 10px 20px;
      }
      .course-row {
        border: 1px dotted white;
        border-radius: 20px;
      }
    </style>
  </head>
  <body>
    <div class="container my-4">
      <h2 class="text-success text-center fw-bold">Szabist GPA Calculator</h2>
      <form id="gpaForm" class="p-4">
        <div id="coursesContainer">
          <div class="row mb-2 course-row px-2 py-3">
            <div class="col-md-4">
              <input
                id="input"
                type="text"
                name="course"
                placeholder="Course"
                required
                class="form-control"
              />
            </div>
            <div class="col-md-4">
              <input
                id="input"
                type="number"
                name="marks"
                placeholder="Marks"
                required
                class="form-control"
              />
            </div>
            <div class="col-md-4">
              <input
                id="input"
                type="number"
                name="credits"
                placeholder="Credits"
                required
                class="form-control"
              />
            </div>
          </div>
        </div>

        <div
          class="d-flex justify-content-between align-items-center px-2 mt-4"
        >
          <div>
            <h3 style="font-size: 18px" class="text-white">
              Total GPA: <span id="gpaResult">0.00</span>
            </h3>
          </div>
          <div>
            <img
              onclick="addRow(event)"
              src="./images/add.png"
              style="
                width: 24px;
                height: 24px;
                margin-right: 10px;
                cursor: pointer;
              "
              alt=""
            />

            <button
              type="submit"
              style="font-size: 12px"
              class="btn btn-light py-1 px-2"
            >
              Submit
            </button>
          </div>
        </div>
      </form>
    </div>

    <script>
      function addRow(event) {
        event.preventDefault();
        let container = document.getElementById("coursesContainer");

        let newRow = document.createElement("div");
        newRow.classList.add("row", "mb-2", "course-row", "px-2", "py-3");

        newRow.innerHTML = `
          <div class="col-md-4">
            <input id="input" type="text" name="course" placeholder="Course" required class="form-control"/>
          </div>
          <div class="col-md-4">
            <input id="input" type="number" name="marks" placeholder="Marks" required class="form-control"/>
          </div>
          <div class="col-md-4">
            <input id="input" type="number" name="credits" placeholder="Credits" required class="form-control"/>
          </div>
        `;

        container.appendChild(newRow);
      }

      document
        .getElementById("gpaForm")
        .addEventListener("submit", function (event) {
          event.preventDefault();
          let rows = document.querySelectorAll(".course-row");
          let totalCredits = 0,
            totalGradePoints = 0;

          rows.forEach((row) => {
            let marks = parseFloat(row.querySelector('[name="marks"]').value);
            let credits = parseFloat(
              row.querySelector('[name="credits"]').value
            );
            let gpa = getGPA(marks);

            totalGradePoints += gpa * credits;
            totalCredits += credits;
          });

          let finalGPA = totalCredits
            ? (totalGradePoints / totalCredits).toFixed(2)
            : 0.0;
          document.getElementById("gpaResult").innerText = finalGPA;
        });

      function getGPA(marks) {
        if (marks >= 90) return 4.0;
        if (marks >= 85 && marks <= 89) return 3.75;
        if (marks >= 80 && marks <= 84) return 3.5;
        if (marks >= 75 && marks <= 79) return 3.25;
        if (marks >= 70 && marks <= 74) return 3;
        if (marks >= 66 && marks <= 69) return 2.75;
        if (marks >= 63 && marks <= 65) return 2.5;
        if (marks >= 60 && marks <= 62) return 2;
        if (marks >= 55 && marks <= 59) return 1.5;

        return 0.0;
      }
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
